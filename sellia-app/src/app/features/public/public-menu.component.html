<div class="menu-container">
  <!-- Header avec logo -->
  <header class="menu-header">
    <div class="header-wrapper">
      <div class="logo-section">
        <img src="assets/maison-recla-logo.jpg" alt="MAISON RECLA" class="logo">
        <h1>MAISON RECLA</h1>
      </div>
      <div class="table-info">
        <span class="table-label">Table {{ tableNumber }}</span>
        <span *ngIf="isVip" class="vip-badge">VIP</span>
      </div>
    </div>
  </header>

  <!-- Alerts -->
  <div *ngIf="error" class="alert alert-error">
    <p>{{ error }}</p>
  </div>

  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Chargement du menu...</p>
  </div>

  <div *ngIf="orderSuccess" class="alert alert-success">
    <p>‚úì Commande confirm√©e!</p>
    <p>Num√©ro: <strong>{{ orderNumber }}</strong></p>
  </div>

  <!-- Main Layout -->
  <div *ngIf="!loading && !orderSuccess" class="main-layout">
    <!-- Left: Menu -->
    <section class="menu-content">
      <!-- Sp√©cialit√©s -->
      <div *ngIf="popularItems.length > 0" class="menu-section">
        <h2 class="section-title">‚≠ê Sp√©cialit√©s du Jour</h2>
        <div class="items-container">
          <div *ngFor="let item of popularItems" class="product-card special">
            <div class="product-header">
              <h3 class="product-name">{{ item.itemName }}</h3>
              <span class="product-price">{{ formatPrice(item.price) }}</span>
            </div>
            <p class="product-description">{{ item.description }}</p>
            <p *ngIf="item.specialDescription" class="product-special">{{ item.specialDescription }}</p>
            <button class="btn-add-to-cart" (click)="addToCart(item)">
              üõí Ajouter au panier
            </button>
          </div>
        </div>
      </div>

      <!-- Cat√©gories -->
      <div *ngFor="let category of categories" class="menu-section">
        <h2 class="section-title">{{ category.name }}</h2>
        <p class="category-desc">{{ category.description }}</p>
        <div class="items-container">
          <p class="no-items">{{ category.itemCount }} articles disponibles</p>
        </div>
      </div>
    </section>

    <!-- Right: Panier -->
    <aside class="cart-panel" [class.open]="showCart">
      <div class="cart-header">
        <h2>üõí Panier</h2>
        <button class="btn-close" (click)="toggleCart()">‚úï</button>
      </div>

      <!-- Panier vide -->
      <div *ngIf="cart.length === 0" class="empty-cart">
        <p class="empty-icon">üõí</p>
        <p>Panier vide</p>
      </div>

      <!-- Panier rempli -->
      <div *ngIf="cart.length > 0" class="cart-full">
        <div class="cart-items">
          <div *ngFor="let item of cart; let i = index" class="cart-item">
            <div class="item-left">
              <span class="item-name">{{ item.itemName }}</span>
              <span class="item-price">{{ formatPrice(item.unitPrice) }}</span>
            </div>
            <div class="item-controls">
              <button class="btn-qty-decrease" (click)="item.quantity > 1 && item.quantity--; updateQuantity(item)">‚àí</button>
              <span class="qty-display">{{ item.quantity }}</span>
              <button class="btn-qty-increase" (click)="item.quantity++; updateQuantity(item)">+</button>
              <span class="item-subtotal">{{ formatPrice(item.totalPrice) }}</span>
              <button class="btn-remove" (click)="removeFromCart(i)">üóë</button>
            </div>
          </div>
        </div>

        <!-- Totals -->
        <div class="cart-totals">
          <div class="total-row">
            <span>Sous-total</span>
            <strong>{{ formatPrice(cartTotal) }}</strong>
          </div>
        </div>

        <!-- Customer Info -->
        <div class="customer-form">
          <h3>Vos informations</h3>
          <input type="text" [(ngModel)]="customerName" placeholder="Nom (optionnel)" class="form-input">
          <input type="tel" [(ngModel)]="customerPhone" placeholder="T√©l. (optionnel)" class="form-input">
          <textarea [(ngModel)]="notes" placeholder="Allergies, pr√©f√©rences..." class="form-textarea"></textarea>
        </div>

        <!-- Submit Button -->
        <button 
          class="btn-commander" 
          (click)="submitOrder()"
          [disabled]="submitting || cart.length === 0">
          {{ submitting ? '‚è≥ Envoi...' : `üçî Commander - ${formatPrice(cartTotal)}` }}
        </button>
      </div>
    </aside>

    <!-- Mobile Cart Button -->
    <button class="mobile-cart-btn" *ngIf="cart.length > 0" (click)="toggleCart()">
      üõí {{ cart.length }}
    </button>
  </div>
</div>
