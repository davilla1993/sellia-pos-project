
    <div class="space-y-6">
      <!-- Header -->
      <div>
        <a routerLink="/admin/products/catalog" class="text-primary hover:text-primary-dark font-medium mb-4 inline-block">‚Üê Retour</a>
        <h1 class="text-3xl font-bold text-white">{{ isEditMode() ? "√âditer le produit" : "Nouveau produit" }}</h1>
      </div>

      <!-- Loading -->
      <div *ngIf="isLoading()" class="flex justify-center py-12">
        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
      </div>

      <!-- Form -->
      <form *ngIf="!isLoading()" [formGroup]="form" (ngSubmit)="onSubmit()" class="bg-gradient-to-b from-neutral-800 to-neutral-900 rounded-xl border border-neutral-700 p-6 space-y-4">
        
        <!-- Error -->
        <div *ngIf="error()" class="p-4 bg-red-900/20 border border-red-500/50 rounded-lg text-red-200 text-sm">
          {{ error() }}
        </div>

        <!-- Two Column Layout -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <!-- LEFT COLUMN -->
          <div class="space-y-3">
            <!-- Image Upload -->
            <div>
              <label class="block text-xs font-semibold text-neutral-300 uppercase tracking-wider mb-2">üì∑ Image</label>
              <div class="space-y-2">
                <div *ngIf="imagePreview()" class="relative w-24 h-24 rounded-lg border border-neutral-600 overflow-hidden bg-neutral-700">
                  <img [src]="imagePreview()" alt="Preview" class="w-full h-full object-cover">
                  <button type="button" (click)="clearImage()" class="absolute -top-2 -right-2 bg-red-600 hover:bg-red-700 text-white p-1 rounded-full transition">
                    <svg class="w-3 h-3" fill="currentColor" viewBox="0 0 24 24"><path d="M6 18L18 6M6 6l12 12"></path></svg>
                  </button>
                </div>
                <div *ngIf="!imagePreview()" class="w-24 h-24 rounded-lg border-2 border-dashed border-neutral-600 bg-neutral-700/50 flex items-center justify-center">
                  <p class="text-neutral-400 text-xs">üì∑</p>
                </div>
                <input #fileInput type="file" accept=".jpg,.jpeg,.png,.gif,.webp" (change)="onImageSelected($event)" class="hidden">
                <button type="button" (click)="fileInput.click()" class="w-full px-2 py-1.5 bg-neutral-700 hover:bg-neutral-600 text-white text-xs font-medium rounded transition">
                  S√©lectionner
                </button>
                <p class="text-xs text-neutral-400">Max 5MB</p>
              </div>
            </div>

            <!-- Description -->
            <div>
              <label class="block text-xs font-semibold text-neutral-300 uppercase tracking-wider mb-1">Description</label>
              <textarea formControlName="description" class="w-full px-4 py-2 bg-neutral-700/50 border border-neutral-600 rounded-lg text-white placeholder-neutral-500 focus:border-primary/50 focus:outline-none transition h-14 resize-none text-xs" placeholder="Description..."></textarea>
              <p class="text-xs text-neutral-400 mt-0.5">{{ form.get('description')?.value?.length || 0 }}/500</p>
            </div>

            <!-- Ingredients & Allergens -->
            <div>
              <h4 class="text-xs font-semibold text-neutral-300 uppercase tracking-wider mb-2">ü•ó Composition</h4>
              <div class="space-y-2">
                <div>
                  <label class="block text-xs font-semibold text-neutral-300 mb-1">Ingr√©dients</label>
                  <textarea formControlName="ingredients" class="w-full px-3 py-1.5 bg-neutral-700/50 border border-neutral-600 rounded-lg text-white placeholder-neutral-500 focus:border-primary/50 focus:outline-none transition h-10 resize-none text-xs" placeholder="Ex: Tomate, Mozzarella"></textarea>
                </div>
                <div>
                  <label class="block text-xs font-semibold text-neutral-300 mb-1">‚ö†Ô∏è Allerg√®nes</label>
                  <textarea formControlName="allergens" class="w-full px-3 py-1.5 bg-neutral-700/50 border border-neutral-600 rounded-lg text-white placeholder-neutral-500 focus:border-primary/50 focus:outline-none transition h-10 resize-none text-xs" placeholder="Ex: Gluten, Lait"></textarea>
                </div>
              </div>
            </div>
          </div>

          <!-- RIGHT COLUMN -->
          <div class="space-y-3">
            <!-- Name -->
            <div>
              <label class="block text-xs font-semibold text-neutral-300 uppercase tracking-wider mb-2">Nom du produit *</label>
              <input formControlName="name" type="text" class="w-full px-4 py-2.5 bg-neutral-700/50 border border-neutral-600 rounded-lg text-white placeholder-neutral-500 focus:border-primary/50 focus:outline-none transition" placeholder="Pizza Margherita">
              <p *ngIf="hasError('name')" class="text-red-400 text-xs mt-1">Requis (max 100)</p>
            </div>

            <!-- Price & Category -->
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="block text-xs font-semibold text-neutral-300 uppercase tracking-wider mb-1">Prix (FCFA) *</label>
                <input formControlName="price" type="number" class="w-full px-4 py-2.5 bg-neutral-700/50 border border-neutral-600 rounded-lg text-white placeholder-neutral-500 focus:border-primary/50 focus:outline-none transition" placeholder="1000">
                <p *ngIf="hasError('price')" class="text-red-400 text-xs mt-1">Requis (‚â• 1)</p>
              </div>
              <div>
                <label class="block text-xs font-semibold text-neutral-300 uppercase tracking-wider mb-2">Cat√©gorie *</label>
                <select formControlName="categoryId" class="w-full px-4 py-2.5 bg-neutral-700/50 border border-neutral-600 rounded-lg text-white focus:border-primary/50 focus:outline-none transition">
                  <option value="">S√©lectionner...</option>
                  <option *ngFor="let cat of categories()" [value]="cat.id">{{ cat.name }}</option>
                </select>
                <p *ngIf="hasError('categoryId')" class="text-red-400 text-xs mt-1">Requis</p>
              </div>
            </div>

            <!-- Stock -->
            <div>
              <label class="block text-xs font-semibold text-neutral-300 uppercase tracking-wider mb-2">üì¶ Stock (optionnel)</label>
              <input formControlName="stock" type="number" class="w-full px-4 py-2.5 bg-neutral-700/50 border border-neutral-600 rounded-lg text-white placeholder-neutral-500 focus:border-primary/50 focus:outline-none transition" placeholder="Laisser vide si pas de gestion">
              <p *ngIf="hasError('stock')" class="text-red-400 text-xs mt-1">Quantit√© invalide</p>
            </div>

            <!-- Settings Section -->
            <div>
              <h4 class="text-xs font-semibold text-neutral-300 uppercase tracking-wider mb-2">‚öôÔ∏è Param√®tres</h4>
              <div class="space-y-2">
                <!-- Station & Prep Time -->
                <div class="grid grid-cols-2 gap-2">
                  <div>
                    <label class="block text-xs font-semibold text-neutral-300 mb-1">Station *</label>
                    <select formControlName="workStation" class="w-full px-4 py-2.5 bg-neutral-700/50 border border-neutral-600 rounded-lg text-white focus:border-primary/50 focus:outline-none transition text-sm">
                      <option *ngFor="let ws of workStations()" [value]="ws.value">{{ ws.label }}</option>
                    </select>
                  </div>
                  <div>
                    <label class="block text-xs font-semibold text-neutral-300 mb-2">Prep (min)</label>
                    <input formControlName="preparationTime" type="number" class="w-full px-4 py-2.5 bg-neutral-700/50 border border-neutral-600 rounded-lg text-white placeholder-neutral-500 focus:border-primary/50 focus:outline-none transition" placeholder="10">
                  </div>
                </div>

                <!-- Order & VIP & Available -->
                <div class="grid grid-cols-3 gap-3">
                  <div>
                    <label class="block text-xs font-semibold text-neutral-300 mb-2">Ordre</label>
                    <input formControlName="displayOrder" type="number" class="w-full px-4 py-2.5 bg-neutral-700/50 border border-neutral-600 rounded-lg text-white focus:border-primary/50 focus:outline-none transition" placeholder="0">
                  </div>
                  <label class="flex items-end gap-2 cursor-pointer">
                    <input formControlName="isVip" type="checkbox" class="w-4 h-4 rounded border-neutral-600 accent-primary">
                    <span class="text-xs font-semibold text-neutral-300">üëë VIP</span>
                  </label>
                  <label class="flex items-end gap-2 cursor-pointer">
                    <input formControlName="available" type="checkbox" class="w-4 h-4 rounded border-neutral-600 accent-primary">
                    <span class="text-xs font-semibold text-neutral-300">‚úì Disponible</span>
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Buttons -->
        <div class="flex gap-2 pt-3 border-t border-neutral-700">
          <button type="submit" [disabled]="isSubmitting() || form.invalid" class="flex-1 px-3 py-2 bg-gradient-to-r from-primary to-primary-dark hover:from-primary-dark hover:to-primary disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold rounded transition text-sm">
            {{ isSubmitting() ? "‚è≥..." : isEditMode() ? "‚úì Mettre √† jour" : "‚úì Cr√©er" }}
          </button>
          <a routerLink="/admin/products/catalog" class="flex-1 px-3 py-2 bg-neutral-700 hover:bg-neutral-600 text-white font-semibold rounded transition text-center text-sm">
            Annuler
          </a>
        </div>
      </form>
    </div>
  